сть `Image.quantize()`, которая уменьшает количество используемых цветов.
Примеры с параметром `colors=32`.

Тут палитра сжимается, но цвета все равно те же.

![quantize_example_1](/home/rrezbaev/Pictures/ryemage/image_2023-08-12_20-37-01.png)

![image-20230812204643375](/home/rrezbaev/.config/Typora/typora-user-images/image-20230812204643375.png)


Немного посерчил, то что я хочу называется __"Palette-based Photo Recoloring"__ - https://gfx.cs.princeton.edu/pubs/Chang_2015_PPR/index.php

Есть штуки которые вытягивают палитру с картинки, вроде https://github.com/qTipTip/Pylette. 

![image-20230812230648018](/home/rrezbaev/.config/Typora/typora-user-images/image-20230812230648018.png)

![image-20230812225558540](/home/rrezbaev/.config/Typora/typora-user-images/image-20230812225558540.png)

# useful links

https://gfx.cs.princeton.edu/pubs/Chang_2015_PPR/index.php

http://www.easyrgb.com/en/math.php